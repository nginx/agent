log:
  level: debug
  path: ./

watchers:
    instance_watcher:
        monitoring_frequency: 5s
    instance_health_watcher:
        monitoring_frequency: 5s
    file_watcher:
        monitoring_frequency: 5s
        exclude_files: 
            - \.*log$

data_plane_config:
    nginx:
        reload_monitoring_period: 30s
        treat_warnings_as_errors: false
        exclude_logs: 
            - /var/log/nginx/error.log
            - ^/var/log/nginx/.*.log$
client:
    http: 
        timeout: 15s
    grpc:
       keepalive:
         timeout: 15s
         time: 10s
         permit_without_stream: false
       max_message_size: 1048575
       max_message_receive_size: 1048575
       max_message_send_size: 1048575
    backoff:
        initial_interval: 200ms
        max_interval: 10s
        max_elapsed_time: 25s
        randomization_factor: 1.5
        multiplier: 2.5
      
collector:
  config_path: "/etc/nginx-agent/nginx-agent-otelcol.yaml"
  receivers:
    otlp_receivers:
        - server:
            host: "127.0.0.1"
            port: 4317
            type: 0
          auth:
            Token: "secret-receiver-token"
          tls:
            generate_self_signed_cert: false
            server_name: "test-local-server"
            ca: /tmp/ca.pem
            cert: /tmp/cert.pem
            key: /tmp/key.pem
    nginx_receivers:
        - instance_id: cd7b8911-c2c5-4daf-b311-dbead151d938
          stub_status: "http://localhost:4321/status"
          access_logs:
            - file_path: "/var/log/nginx/access-custom.conf"
              log_format: "$remote_addr - $remote_user [$time_local] \"$request\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" \"$http_x_forwarded_for\"\"$upstream_cache_status\""
  processors:
    batch: {}
  exporters:
    otlp_exporters:
      - server:
          host: "127.0.0.1"
          port: 5643
        auth:
          Token: "secret-saas-token"
        tls:
          server_name: "test-saas-server"
          skip_verify: false
          cert: /path/to/server-cert.pem
          key: /path/to/server-key.pem
          ca: /path/to/server-cert.pem
  extensions:
    health:
      server:
        host: "127.0.0.1"
        port: 1234

allowed_directories:
    - /etc/nginx
    - /usr/local/etc/nginx
    - /var/run/nginx
    - /usr/share/nginx/modules
    - /var/log/nginx
